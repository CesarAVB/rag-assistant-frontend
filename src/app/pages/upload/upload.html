<div class="upload-wrapper container py-4">
  <div class="upload-card card shadow-sm">

    <!-- Cabeçalho -->
    <div class="card-header d-flex justify-content-between align-items-center">
      <div class="header-left">
        <i class="fas fa-database avatar-icon" aria-hidden="true"></i>
        <div>
          <div class="upload-title">Base de Conhecimento</div>
          <div class="upload-sub">Formatos aceitos: PDF, DOC, DOCX, XLS, XLSX, TXT</div>
        </div>
      </div>
      <div class="header-actions">
        <!-- espaço reservado para ações futuras -->
      </div>
    </div>

    <div class="card-body">

      <!-- Área de Drag and Drop -->
      <div
        class="drop-zone"
        [class.dragging]="isDragging"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave()"
        (drop)="onDrop($event)">
        <i class="fas fa-cloud-upload-alt fa-3x mb-3 upload-icon" aria-hidden="true"></i>
        <p class="mb-1"><strong>Arraste e solte os arquivos aqui</strong></p>
        <p class="text-muted mb-0">ou clique no botão abaixo para selecionar</p>
        <div class="mt-3">
          <label class="btn btn-outline-secondary btn-sm mb-0">
            Selecionar arquivos
            <input
              #fileInput
              type="file"
              [accept]="acceptedFormats"
              multiple
              hidden
              (change)="onFileSelected($event)">
          </label>
        </div>
      </div>

      <!-- Lista de arquivos -->
      <div class="file-list mt-4" *ngIf="files.length > 0">
        <div class="file-item" *ngFor="let uploadFile of files; let i = index">

          <!-- Ícone do tipo de arquivo -->
          <div class="file-left">
            <i class="fas fa-lg" [class]="getFileIcon(uploadFile.file.name)"></i>
          </div>

          <!-- Nome e tamanho -->
          <div class="file-info">
            <span class="file-name">{{ uploadFile.file.name }}</span>
            <small class="text-muted">{{ formatSize(uploadFile.file.size) }}</small>
          </div>

          <!-- Mensagem de status e ações -->
          <div class="file-actions d-flex align-items-center gap-3">
            <small class="status-message text-muted">{{ uploadFile.message }}</small>
            <i class="fas" [class]="getStatusIcon(uploadFile.status)"></i>
            <button
              class="btn btn-sm btn-outline-danger"
              *ngIf="uploadFile.status === 'pending'"
              (click)="removeFile(i)"
              title="Remover">
              <i class="fas fa-times"></i>
            </button>
          </div>

        </div>
      </div>

      <!-- Sem arquivos -->
      <div class="text-center text-muted py-3" *ngIf="files.length === 0">
        <i class="fas fa-folder-open fa-2x mb-2"></i>
        <p class="mb-0">Nenhum arquivo selecionado</p>
      </div>

    </div>

    <!-- Rodapé com ações -->
    <div class="card-footer d-flex justify-content-between align-items-center" *ngIf="files.length > 0">
      <small class="text-muted">{{ files.length }} arquivo(s) na lista</small>
      <div class="d-flex gap-2">
        <button
          class="btn btn-outline-secondary btn-sm"
          *ngIf="hasSuccess"
          (click)="clearSuccess()">
          <i class="fas fa-broom me-1"></i>Limpar enviados
        </button>
        <button
          class="btn btn-primary btn-sm btn-send"
          [disabled]="!hasPending"
          (click)="uploadAll()">
          <i class="fas fa-upload me-1"></i>Enviar
        </button>
      </div>
    </div>

  </div>
</div>